package info.nukoneko.android.qritter.util.async;import android.app.Activity;import android.content.Context;import android.os.AsyncTask;/** * Created by TEJNEK on 2016/03/17. */public class SimpleAsync {    // TODO: ライフサイクル的に危ない...    private final Activity context;    public SimpleAsync(Activity context){        this.context = context;    }    public <T> void start(final AsyncListener<T> listener){        new AsyncTask<Void, Void, T>() {            @Override            protected T doInBackground(Void... params) {                try {                    return listener.doTask();                }                catch (Exception e){                    listener.onError(e);                }                return null;            }            @Override            protected void onPostExecute(T t) {                super.onPostExecute(t);                final T ret = t;                context.runOnUiThread(() -> listener.onResult(context, ret));            }        }.execute();    }}